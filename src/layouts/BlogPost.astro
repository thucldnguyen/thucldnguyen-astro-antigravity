---
import { Image } from "astro:assets";
import type { CollectionEntry } from "astro:content";
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import FormattedDate from "../components/FormattedDate.astro";
import Header from "../components/Header.astro";
import CallToAction from "../components/CallToAction.astro";
import bannerImage from "../assets/banner.jpg";

type Props = CollectionEntry<"blog">["data"];

const { title, description, date, updatedDate, heroImage, featuredImage } =
	Astro.props;
const resolvedImage = heroImage || featuredImage || bannerImage;
---

<html lang="en">
	<head>
		<BaseHead
			title={title}
			description={description}
			image={resolvedImage}
		/>
	</head>

	<body
		class="bg-slate-50 dark:bg-slate-950 text-slate-900 dark:text-slate-100 transition-colors duration-300"
	>
		<Header />
		<main class="w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
			<article
				class="bg-white dark:bg-slate-900 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-800 overflow-hidden transition-colors duration-300"
			>
				<div class="w-full relative bg-slate-100 dark:bg-slate-800">
					{
						typeof resolvedImage === "string" ? (
							<img
								width={1020}
								height={574}
								src={resolvedImage}
								alt=""
								loading="eager"
								fetchpriority="high"
								class="w-full h-auto object-cover"
							/>
						) : (
							<Image
								width={1020}
								src={resolvedImage}
								alt=""
								loading="eager"
								fetchpriority="high"
								class="w-full h-auto object-cover"
							/>
						)
					}
				</div>
				<div class="p-8 md:p-12 lg:p-16">
					<div class="text-center mb-12">
						<div class="text-slate-500 dark:text-slate-400 mb-4">
							<FormattedDate date={date} />
							{
								updatedDate && (
									<div class="italic text-sm mt-1">
										Last updated on{" "}
										<FormattedDate date={updatedDate} />
									</div>
								)
							}
						</div>
						<h1
							class="text-4xl md:text-5xl font-bold tracking-tight text-slate-900 dark:text-white mb-4"
						>
							{title}
						</h1>
						<hr class="w-24 h-1 bg-accent mx-auto" />
					</div>
					<div
						class="prose prose-lg prose-slate dark:prose-invert mx-auto max-w-none"
					>
						<slot />
						<hr
							class="my-12 h-px border-0 bg-slate-200 dark:bg-slate-800"
						/>
						<CallToAction />
					</div>
				</div>
			</article>
		</main>
		<Footer />
	</body>
</html>
